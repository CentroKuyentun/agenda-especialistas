<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Centro de Salud</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root { --main-red: #b30000; }
    html, body { height: 100%; display: flex; flex-direction: column; background-color: #f8f9fa; }
    main { flex: 1 0 auto; }
    header { background:white; text-align:center; padding:20px 0; }
    header img { max-height:120px; }
  .separator {
      height: 4px;
      background: linear-gradient(to right, transparent, var(--main-red), transparent);
      margin-bottom: 30px;
    }
    /* Especialidad cards */
    .specialty-card {
      background-color: white;
      border: 2px solid var(--main-red);
      border-radius: 10px;
      padding: 20px 10px;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s ease;
      color: var(--main-red);
    }
    .specialty-card:hover { transform: translateY(-5px); background-color: #ffe6e6; }
    .specialty-card i { font-size: 2rem; margin-bottom: 10px; }

    /* Cards de profesionales */
    .card {
      max-width: 160px; width:100%; text-align:center; padding:10px;
      display:flex; flex-direction:column; justify-content:space-between; align-items:center;
      min-height: 230px;
    }
    .card img { width: 90px; height: 90px; object-fit: cover; border-radius: 50%; border:3px solid #f0f0f0; margin:10px auto; }
    .professional-title { font-size:0.8rem; color:var(--main-red); margin:4px 0 1px; }
    .professional-subtitle { font-size:0.6rem; color:#666; margin:0 0 4px; font-style: italic; line-height:1.1; }

    .social-icons a { color: var(--main-red); font-size: 14px; margin: 0 5px; }
    .social-icons a:hover { color: #a30000; }

    /* Accordion */
    .accordion-button { background-color: var(--main-red); color:white; }
    .accordion-button:not(.collapsed) { background-color: var(--main-red); color:white; }
    .accordion-button::after { filter: brightness(0) invert(1); }

    footer { flex-shrink:0; text-align:center; padding:10px 0; font-size:0.8rem; background-color:var(--main-red); color:white; }
  </style>
</head>
<body>
<header>
  <img src="img/logo.jpg" alt="Logo Centro de Salud">
</header>
<div class="separator"></div>

<main class="container my-4">
  <section class="py-1 text-center">
    <div class="container">
      <div id="specialtyRow" class="row g-3 justify-content-center"></div>
    </div>
  </section>

  <!-- Accordion dinámico -->
  <div class="accordion mt-4" id="accordionEspecialidades"></div>
</main>

<footer>© 2025 Centro de Salud - Todos los derechos reservados</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
const specialtyIcons = {
  "matronas": "fas fa-baby",
  "kinesiologia": "fas fa-running",
  "nutricion": "fas fa-apple-alt",
  "psicologia": "fas fa-brain",
  "fonoaudiologia": "fas fa-assistive-listening-systems",
  "otros": "fas fa-user-md",
  "default": "fas fa-stethoscope"
};

function showSpecialty(cat){
  const collapse = document.querySelector(`#${cat} .accordion-collapse`);
  if(collapse){
    const bsCollapse = new bootstrap.Collapse(collapse, {toggle:true});
    collapse.scrollIntoView({behavior:"smooth"});
  }
}

fetch('profesionales.json')
.then(res => res.json())
.then(data => {
  const accordion = document.getElementById('accordionEspecialidades');
  const specialtyRow = document.getElementById('specialtyRow');

  const categorias = {};
  data.forEach(p => {
    if(!categorias[p.categoria]) categorias[p.categoria] = [];
    categorias[p.categoria].push(p);
  });

  Object.keys(categorias).forEach((categoria, idx) => {
    // Crear card de especialidad arriba
    const icon = specialtyIcons[categoria] || specialtyIcons.default;
    const col = document.createElement('div');
    col.className = 'col-lg-3 col-md-4 col-6';
    col.innerHTML = `<div class="specialty-card" onclick="showSpecialty('${categoria}')">
                       <i class="${icon}"></i><h5>${categoria.charAt(0).toUpperCase()+categoria.slice(1)}</h5>
                     </div>`;
    specialtyRow.appendChild(col);

    // Crear acordeón
    const idCollapse = `collapse_${categoria}`;
    const item = document.createElement('div');
    item.className = 'accordion-item';
    item.id = categoria;
    item.innerHTML = `
      <h2 class="accordion-header">
        <button class="accordion-button ${idx>0?'collapsed':''}" type="button" data-bs-toggle="collapse" data-bs-target="#${idCollapse}" aria-expanded="${idx===0}">
          ${categoria.toUpperCase()}
        </button>
      </h2>
      <div id="${idCollapse}" class="accordion-collapse collapse ${idx===0?'show':''}">
        <div class="accordion-body"><div class="d-flex flex-wrap justify-content-center gap-3"></div></div>
      </div>`;
    accordion.appendChild(item);

    const contenedor = item.querySelector('.d-flex');
    categorias[categoria].forEach(p => {
      const card = document.createElement('div');
      card.className = 'card shadow-sm';
      card.innerHTML = `
        <img src="${p.imagen}" alt="${p.nombre}">
        <h5>${p.nombre}</h5>
        <div class="professional-title">${p.titulo}</div>
        ${p.especialidad?`<div class="professional-subtitle">${p.especialidad}</div>`:''}
        <div class="social-icons">
          <a href="${p.whatsapp}"><i class="fab fa-whatsapp"></i></a>
          <a href="${p.instagram}"><i class="fab fa-instagram"></i></a>
        </div>`;
      contenedor.appendChild(card);
    });
  });
})
.catch(err => console.error("Error cargando profesionales:", err));
</script>
</body>
</html>
